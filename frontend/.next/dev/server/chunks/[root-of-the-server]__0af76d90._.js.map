{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 64, "column": 0}, "map": {"version":3,"sources":["file:///Users/dpang/dev/grokipedia-research/frontend/app/api/video/%5BchunkDir%5D/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from 'next/server'\nimport { readFile } from 'fs/promises'\nimport { join, resolve } from 'path'\nimport { existsSync } from 'fs'\n\nexport async function GET(\n  request: NextRequest,\n  { params }: { params: Promise<{ chunkDir: string }> }\n) {\n  try {\n    const { chunkDir } = await params\n    const PROJECT_ROOT = resolve(process.cwd(), '..')\n    const videoPath = join(\n      PROJECT_ROOT,\n      'paper-manim-viz-explanations/deepseek-moe-explainer/generated_videos/spmoe_architecture',\n      chunkDir,\n      'video.mp4'\n    )\n    \n    if (!existsSync(videoPath)) {\n      return NextResponse.json({ error: 'Video not found' }, { status: 404 })\n    }\n    \n    const videoBuffer = await readFile(videoPath)\n    \n    return new NextResponse(videoBuffer, {\n      headers: {\n        'Content-Type': 'video/mp4',\n        'Content-Length': videoBuffer.length.toString(),\n        'Cache-Control': 'public, max-age=31536000, immutable',\n      },\n    })\n  } catch (error) {\n    console.error('Error serving video:', error)\n    return NextResponse.json({ error: 'Failed to serve video' }, { status: 500 })\n  }\n}\n\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;AACA;;;;;AAEO,eAAe,IACpB,OAAoB,EACpB,EAAE,MAAM,EAA6C;IAErD,IAAI;QACF,MAAM,EAAE,QAAQ,EAAE,GAAG,MAAM;QAC3B,MAAM,eAAe,IAAA,4GAAO,EAAC,QAAQ,GAAG,IAAI;QAC5C,MAAM,YAAY,IAAA,yGAAI,EACpB,cACA,2FACA,UACA;QAGF,IAAI,CAAC,IAAA,2GAAU,EAAC,YAAY;YAC1B,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAAkB,GAAG;gBAAE,QAAQ;YAAI;QACvE;QAEA,MAAM,cAAc,MAAM,IAAA,iIAAQ,EAAC;QAEnC,OAAO,IAAI,gJAAY,CAAC,aAAa;YACnC,SAAS;gBACP,gBAAgB;gBAChB,kBAAkB,YAAY,MAAM,CAAC,QAAQ;gBAC7C,iBAAiB;YACnB;QACF;IACF,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,wBAAwB;QACtC,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAwB,GAAG;YAAE,QAAQ;QAAI;IAC7E;AACF"}}]
}